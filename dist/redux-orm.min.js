!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ReduxOrm",[],e):"object"==typeof exports?exports.ReduxOrm=e():t.ReduxOrm=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=153)}([function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}},function(t,e,n){var r=n(33),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){var r=n(87),o=n(90);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e,n){var r=n(7),o=n(65),i=n(66),s="[object Null]",a="[object Undefined]",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:s:u&&u in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(3).Symbol;t.exports=r},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(56),o=n(57),i=n(58);t.exports=function(t){return r(t)||o(t)||i()}},function(t,e,n){var r=n(38),o=n(24);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(75),o=n(124),i=n(19),s=n(1),a=n(134);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?s(t)?o(t[0],t[1]):r(t):a(t)}},function(t,e,n){var r=n(77),o=n(78),i=n(79),s=n(80),a=n(81);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(25);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(4)(Object,"create");t.exports=r},function(t,e,n){var r=n(99);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(6),o=n(8),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&r(t)==i}},function(t,e,n){var r=n(17),o=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}},function(t,e,n){var r=n(61),o=n(70),i=n(10);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){var r=n(63),o=n(8),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?n:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(4)(n(3),"Map");t.exports=r},function(t,e,n){var r=n(91),o=n(98),i=n(100),s=n(101),a=n(102);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(1),o=n(17),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||s.test(t)||!i.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(152),o=n(32),i=n(12);t.exports=function(t,e){var n={};return e=i(e,3),o(t,function(t,o,i){r(n,o,e(t,o,i))}),n}},function(t,e,n){var r=n(31);t.exports=function(t,e){var n=[];return r(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}},function(t,e,n){var r=n(32),o=n(74)(r);t.exports=o},function(t,e,n){var r=n(59),o=n(21);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(64))},function(t,e,n){(function(t){var r=n(3),o=n(67),i=e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||o;t.exports=u}).call(this,n(35)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(68),o=n(37),i=n(69),s=i&&i.isTypedArray,a=s?o(s):r;t.exports=a},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(6),o=n(11),i="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==s||e==a||e==i||e==u}},function(t,e,n){var r=n(13),o=n(82),i=n(83),s=n(84),a=n(85),u=n(86);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,t.exports=c},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(103),o=n(8);t.exports=function t(e,n,i,s,a){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,s,t,a))}},function(t,e,n){var r=n(104),o=n(107),i=n(108),s=1,a=2;t.exports=function(t,e,n,u,c,l){var f=n&s,d=t.length,h=e.length;if(d!=h&&!(f&&h>d))return!1;var p=l.get(t);if(p&&l.get(e))return p==e;var m=-1,y=!0,b=n&a?new r:void 0;for(l.set(t,e),l.set(e,t);++m<d;){var v=t[m],g=e[m];if(u)var w=f?u(g,v,m,e,t,l):u(v,g,m,t,e,l);if(void 0!==w){if(w)continue;y=!1;break}if(b){if(!o(e,function(t,e){if(!i(b,e)&&(v===t||c(v,t,n,u,l)))return b.push(e)})){y=!1;break}}else if(v!==g&&!c(v,g,n,u,l)){y=!1;break}}return l.delete(t),l.delete(e),y}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(11);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){var r=n(47),o=n(18);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(1),o=n(28),i=n(126),s=n(129);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(s(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(48),o=n(12),i=n(138),s=n(139),a=n(37),u=n(140),c=n(19);t.exports=function(t,e,n){var l=-1;e=r(e.length?e:[c],a(o));var f=i(t,function(t,n,o){return{criteria:r(e,function(e){return e(t)}),index:++l,value:t}});return s(f,function(t,e){return u(t,e,n)})}},function(t,e,n){var r=n(4),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(20),o=n(30),i=n(12),s=n(1),a=n(137);t.exports=function(t,e){return(s(t)?r:o)(t,a(i(e,3)))}},function(t,e,n){var r=n(20),o=n(30),i=n(12),s=n(1);t.exports=function(t,e){return(s(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(49),o=n(1);t.exports=function(t,e,n,i){return null==t?[]:(o(e)||(e=null==e?[]:[e]),o(n=i?void 0:n)||(n=null==n?[]:[n]),r(t,e,n))}},function(t,e,n){var r=n(142),o=n(49),i=n(144),s=n(151),a=i(function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),o(t,r(e,1),[])});t.exports=a},function(t,e,n){"use strict";function r(t,e){return t===e}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,o=null;return function(){return function(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t(e[o],n[o]))return!1;return!0}(e,n,arguments)||(o=t.apply(null,arguments)),n=arguments,o}}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];var s=0,a=r.pop(),u=function(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(t){return"function"==typeof t})){var n=e.map(function(t){return typeof t}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return e}(r),c=t.apply(void 0,[function(){return s++,a.apply(null,arguments)}].concat(n)),l=o(function(){for(var t=[],e=u.length,n=0;n<e;n++)t.push(u[n].apply(null,arguments));return c.apply(null,t)});return l.resultFunc=a,l.recomputations=function(){return s},l.resetRecomputations=function(){return s=0},l}}e.__esModule=!0,e.defaultMemoize=o,e.createSelectorCreator=i,e.createStructuredSelector=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if("object"!=typeof t)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);var n=Object.keys(t);return e(n.map(function(e){return t[e]}),function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(function(t,e,r){return t[n[r]]=e,t},{})})};var s=e.createSelector=i(o)},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){var r=n(60)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++o];if(!1===n(i[u],u,i))break}return e}}},function(t,e,n){var r=n(62),o=n(22),i=n(1),s=n(34),a=n(23),u=n(36),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),l=!n&&o(t),f=!n&&!l&&s(t),d=!n&&!l&&!f&&u(t),h=n||l||f||d,p=h?r(t.length,String):[],m=p.length;for(var y in t)!e&&!c.call(t,y)||h&&("length"==y||f&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,m))||p.push(y);return p}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(6),o=n(8),i="[object Arguments]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(7),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var o=s.call(t);return r&&(e?t[a]=n:delete t[a]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(6),o=n(24),i=n(8),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!s[r(t)]}},function(t,e,n){(function(t){var r=n(33),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o&&r.process,a=function(){try{var t=i&&i.require&&i.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a}).call(this,n(35)(t))},function(t,e,n){var r=n(71),o=n(72),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(73)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(10);t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!r(n))return t(n,o);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&!1!==o(a[s],s,a););return n}}},function(t,e,n){var r=n(76),o=n(123),i=n(45);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(39),o=n(41),i=1,s=2;t.exports=function(t,e,n,a){var u=n.length,c=u,l=!a;if(null==t)return!c;for(t=Object(t);u--;){var f=n[u];if(l&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++u<c;){var d=(f=n[u])[0],h=t[d],p=f[1];if(l&&f[2]){if(void 0===h&&!(d in t))return!1}else{var m=new r;if(a)var y=a(h,p,d,t,e,m);if(!(void 0===y?o(p,h,i|s,a,m):y))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(14),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(14);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(14);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(14);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(13);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(13),o=n(26),i=n(27),s=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<s-1)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(38),o=n(88),i=n(11),s=n(40),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?d:a).test(s(t))}},function(t,e,n){var r=n(89),o=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(3)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(92),o=n(13),i=n(26);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(93),o=n(94),i=n(95),s=n(96),a=n(97);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(15);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(15),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===o?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(15),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(15),o="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?o:e,this}},function(t,e,n){var r=n(16);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(16);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(16);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(16);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(39),o=n(42),i=n(109),s=n(113),a=n(118),u=n(1),c=n(34),l=n(36),f=1,d="[object Arguments]",h="[object Array]",p="[object Object]",m=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,y,b,v){var g=u(t),w=u(e),x=g?h:a(t),_=w?h:a(e),j=(x=x==d?p:x)==p,O=(_=_==d?p:_)==p,M=x==_;if(M&&c(t)){if(!c(e))return!1;g=!0,j=!1}if(M&&!j)return v||(v=new r),g||l(t)?o(t,e,n,y,b,v):i(t,e,x,n,y,b,v);if(!(n&f)){var N=j&&m.call(t,"__wrapped__"),S=O&&m.call(e,"__wrapped__");if(N||S){var k=N?t.value():t,E=S?e.value():e;return v||(v=new r),b(k,E,n,y,v)}}return!!M&&(v||(v=new r),s(t,e,n,y,b,v))}},function(t,e,n){var r=n(27),o=n(105),i=n(106);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=o,s.prototype.has=i,t.exports=s},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(7),o=n(110),i=n(25),s=n(42),a=n(111),u=n(112),c=1,l=2,f="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Map]",m="[object Number]",y="[object RegExp]",b="[object Set]",v="[object String]",g="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",_=r?r.prototype:void 0,j=_?_.valueOf:void 0;t.exports=function(t,e,n,r,_,O,M){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!O(new o(t),new o(e)));case f:case d:case m:return i(+t,+e);case h:return t.name==e.name&&t.message==e.message;case y:case v:return t==e+"";case p:var N=a;case b:var S=r&c;if(N||(N=u),t.size!=e.size&&!S)return!1;var k=M.get(t);if(k)return k==e;r|=l,M.set(t,e);var E=s(N(t),N(e),r,_,O,M);return M.delete(t),E;case g:if(j)return j.call(t)==j.call(e)}return!1}},function(t,e,n){var r=n(3).Uint8Array;t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(114),o=1,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,s,a,u){var c=n&o,l=r(t),f=l.length;if(f!=r(e).length&&!c)return!1;for(var d=f;d--;){var h=l[d];if(!(c?h in e:i.call(e,h)))return!1}var p=u.get(t);if(p&&u.get(e))return p==e;var m=!0;u.set(t,e),u.set(e,t);for(var y=c;++d<f;){var b=t[h=l[d]],v=e[h];if(s)var g=c?s(v,b,h,e,t,u):s(b,v,h,t,e,u);if(!(void 0===g?b===v||a(b,v,n,s,u):g)){m=!1;break}y||(y="constructor"==h)}if(m&&!y){var w=t.constructor,x=e.constructor;w!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(m=!1)}return u.delete(t),u.delete(e),m}},function(t,e,n){var r=n(115),o=n(116),i=n(21);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(43),o=n(1);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(20),o=n(117),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),r(s(t),function(e){return i.call(t,e)}))}:o;t.exports=a},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(119),o=n(26),i=n(120),s=n(121),a=n(122),u=n(6),c=n(40),l=c(r),f=c(o),d=c(i),h=c(s),p=c(a),m=u;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=m(new o)||i&&"[object Promise]"!=m(i.resolve())||s&&"[object Set]"!=m(new s)||a&&"[object WeakMap]"!=m(new a))&&(m=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case d:return"[object Promise]";case h:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=m},function(t,e,n){var r=n(4)(n(3),"DataView");t.exports=r},function(t,e,n){var r=n(4)(n(3),"Promise");t.exports=r},function(t,e,n){var r=n(4)(n(3),"Set");t.exports=r},function(t,e,n){var r=n(4)(n(3),"WeakMap");t.exports=r},function(t,e,n){var r=n(44),o=n(21);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],s=t[i];e[n]=[i,s,r(s)]}return e}},function(t,e,n){var r=n(41),o=n(125),i=n(131),s=n(28),a=n(44),u=n(45),c=n(18),l=1,f=2;t.exports=function(t,e){return s(t)&&a(e)?u(c(t),e):function(n){var s=o(n,t);return void 0===s&&s===e?i(n,t):r(e,s,l|f)}}},function(t,e,n){var r=n(46);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=n(127)(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=i},function(t,e,n){var r=n(128),o=500;t.exports=function(t){var e=r(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(27),o="Expected a function";function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(130);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(7),o=n(48),i=n(1),s=n(17),a=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(s(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-a?"-0":n}},function(t,e,n){var r=n(132),o=n(133);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(47),o=n(22),i=n(1),s=n(23),a=n(24),u=n(18);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,f=!1;++c<l;){var d=u(e[c]);if(!(f=null!=t&&n(t,d)))break;t=t[d]}return f||++c!=l?f:!!(l=null==t?0:t.length)&&a(l)&&s(d,l)&&(i(t)||o(t))}},function(t,e,n){var r=n(135),o=n(136),i=n(28),s=n(18);t.exports=function(t){return i(t)?r(s(t)):o(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(46);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){var n="Expected a function";t.exports=function(t){if("function"!=typeof t)throw new TypeError(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},function(t,e,n){var r=n(31),o=n(10);t.exports=function(t,e){var n=-1,i=o(t)?Array(t.length):[];return r(t,function(t,r,o){i[++n]=e(t,r,o)}),i}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(141);t.exports=function(t,e,n){for(var o=-1,i=t.criteria,s=e.criteria,a=i.length,u=n.length;++o<a;){var c=r(i[o],s[o]);if(c)return o>=u?c:c*("desc"==n[o]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(17);t.exports=function(t,e){if(t!==e){var n=void 0!==t,o=null===t,i=t==t,s=r(t),a=void 0!==e,u=null===e,c=e==e,l=r(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||o&&a&&c||!n&&c||!i)return 1;if(!o&&!s&&!l&&t<e||l&&n&&i&&!o&&!s||u&&n&&i||!a&&i||!c)return-1}return 0}},function(t,e,n){var r=n(43),o=n(143);t.exports=function t(e,n,i,s,a){var u=-1,c=e.length;for(i||(i=o),a||(a=[]);++u<c;){var l=e[u];n>0&&i(l)?n>1?t(l,n-1,i,s,a):r(a,l):s||(a[a.length]=l)}return a}},function(t,e,n){var r=n(7),o=n(22),i=n(1),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(s&&t&&t[s])}},function(t,e,n){var r=n(19),o=n(145),i=n(147);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){var r=n(146),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,s=-1,a=o(i.length-e,0),u=Array(a);++s<a;)u[s]=i[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=i[s];return c[e]=n(u),r(t,this,c)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(148),o=n(150)(r);t.exports=o},function(t,e,n){var r=n(149),o=n(50),i=n(19),s=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=s},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,r=16,o=Date.now;t.exports=function(t){var e=0,i=0;return function(){var s=o(),a=r-(s-i);if(i=s,a>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(25),o=n(10),i=n(23),s=n(11);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?o(n)&&i(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(50);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(29),s=n.n(i),a=n(9),u=n.n(a),c=n(5),l=n.n(c);function f(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function d(t){return function e(n){return 0===arguments.length||f(n)?e:t.apply(this,arguments)}}function h(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,o){return e.apply(this,arguments)};case 5:return function(t,n,r,o,i){return e.apply(this,arguments)};case 6:return function(t,n,r,o,i,s){return e.apply(this,arguments)};case 7:return function(t,n,r,o,i,s,a){return e.apply(this,arguments)};case 8:return function(t,n,r,o,i,s,a,u){return e.apply(this,arguments)};case 9:return function(t,n,r,o,i,s,a,u,c){return e.apply(this,arguments)};case 10:return function(t,n,r,o,i,s,a,u,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var p=function(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return f(n)?e:d(function(e){return t(n,e)});default:return f(n)&&f(r)?e:f(n)?d(function(e){return t(e,r)}):f(r)?d(function(e){return t(n,e)}):t(n,r)}}}(function(t,e){return 1===t?d(e):h(t,function t(e,n,r){return function(){for(var o=[],i=0,s=e,a=0;a<n.length||i<arguments.length;){var u;a<n.length&&(!f(n[a])||i>=arguments.length)?u=n[a]:(u=arguments[i],i+=1),o[a]=u,f(u)||(s-=1),a+=1}return s<=0?r.apply(this,o):h(s,t(e,o,r))}}(t,[],e))}),m=d(function(t){return p(t.length,t)}),y={"@@functional/placeholder":!0};function b(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}var v="@@_______immutableOpsOwnerID";function g(t,e){return!!e&&t[v]===e}var w="function"==typeof Symbol?function(){return Symbol("ownerID")}:function(){return{}};function x(t,e){return e&&function(t,e){Object.defineProperty(t,v,{value:e,configurable:!0,enumerable:!1})}(t,e),t}function _(t){return t instanceof Array?t:[t]}var j=".";function O(t){return"string"==typeof t?-1===t.indexOf(j)?[t]:t.split(j):t}function M(t,e,n){return n[t]=e,n}function N(t,e,n){var r=_(e);return t?r.forEach(function(e){b(e,function(e,r){var o;t&&n.hasOwnProperty(r)?(o="object"===l()(e)?N(t,[e],n[r]):e,n[r]=o):n[r]=e})}):Object.assign.apply(Object,[n].concat(u()(r))),n}var S=N.bind(null,!1),k=N.bind(null,!0);function E(t,e){return _(t).forEach(function(t){delete e[t]}),e}function F(t,e,n){return t[n]!==e[n]}function A(t,e,n,r){if(g(r,e))return N(t,n,r);var o=_(n),i=!1,s=r,a=function(){i||(i=!0,x(s=Object.assign({},r),e))};return o.forEach(function(n){b(n,function(o,i){if(t&&r.hasOwnProperty(i)){var u=s[i];if("object"===l()(o)&&!(o instanceof Array)){if(F(s,n,i)){var c=A(t,e,o,u);c!==u&&(a(),s[i]=c)}return!0}}F(s,n,i)&&(a(),s[i]=o)})}),s}var D=A.bind(null,!0);function I(t,e,n,r){if(g(r,t))return M(e,n,r);if(r[e]===n)return r;var o=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}(r);return o[e]=n,x(o,t),o}function T(t,e){for(var n=0,r=0;n<e.length;){t(e[n],r)?n++:e.splice(n,1),r++}return e}function P(t,e,n,r){var o=_(n);return r.splice.apply(r,[t,e].concat(u()(o))),r}function C(t,e,n){return P(t,0,e,n)}function $(t,e,n,r,o){if(g(o,t))return P(e,n,r,o);var i=_(r),s=o.slice();return x(s,t),s.splice.apply(s,[e,n].concat(u()(i))),s}function R(t,e,n,r){return g(r,t)?C(e,n,r):$(t,e,0,n,r)}var B={merge:A.bind(null,!1),deepMerge:D,omit:function(t,e,n){if(g(n,t))return E(e,n);var r=_(e).filter(function(t){return n.hasOwnProperty(t)});if(0===r.length)return n;var o=Object.assign({},n);return r.forEach(function(t){delete o[t]}),x(o,t),o},setIn:function(t,e,n,r){var o=O(e),i=function(t,e){for(var n=O(t),r=e,o=0;o<n.length;o++){var i=r[n[o]];if(o===n.length-1)return i;if("object"!==l()(i))return;r=i}}(o,r);if(n===i)return r;var s,a=o.length,u=s=g(r,t)?r:Object.assign(x({},t),r);return o.forEach(function(e,r){if(r!==a-1){var i=s[e],u=l()(i);if("object"!==u){if("undefined"===u){var c=x({},t);return s[e]=c,void(s=c)}var f="".concat(o[r-1],".").concat(e);throw new Error("A non-object value was encountered when traversing setIn path at ".concat(f,"."))}if(g(i,t))s=i;else{var d=x({},t);s[e]=Object.assign(d,i),s=d}}else s[e]=n}),u},insert:R,push:function(t,e,n){return R(t,n.length,e,n)},filter:function(t,e,n){if(g(n,t))return T(e,n);var r=n.filter(e);return r.length===n.length?n:(x(r,t),r)},splice:$,set:function(t,e,n,r){if(function(t){return t&&"object"===l()(t)&&"number"==typeof t.length&&t.length>=0&&t.length%1==0}(r))return I(t,e,n,r);if(g(r,t))return M(e,n,r);if(r[e]===n)return r;var o=Object.assign({},r);return x(o,t),o[e]=n,o}},U={merge:S,deepMerge:k,omit:E,setIn:function(t,e,n){for(var r=O(t),o=r.length,i=!1,s=0,a=n,u=r[s];!i;)if(s===o-1)a[u]=e,i=!0;else{var c=l()(a[u]);if("undefined"===c){var f={};x(f,null),a[u]=f}else if("object"!==c){var d="".concat(r[s-1],".").concat(u);throw new Error("A non-object value was encountered when traversing setIn path at ".concat(d,"."))}a=a[u],u=r[++s]}return n},insert:C,push:function(t,e){var n=_(t);return e.push.apply(e,u()(n)),e},filter:T,splice:P,set:M};var z=function(){var t=Object.assign({},B);b(t,function(e,n){t[n]=m(e.bind(null,null))});var e=Object.assign({},U);b(e,function(t,n){e[n]=m(t)});var n=Object.assign({},B);return b(n,function(t,e){n[e]=m(t)}),Object.assign(t,{mutable:e,batch:n,batched:function(t,e){var n,r;"function"==typeof t?(r=t,n=w()):(n=t,r=e);var o=Object.assign({},B);return b(o,function(t,e){o[e]=m(t.bind(null,n))}),r(o)},__:y,getBatchToken:w})}();const q="REDUX_ORM_UPDATE",V="REDUX_ORM_DELETE",L="REDUX_ORM_CREATE",Q="REDUX_ORM_FILTER",X="REDUX_ORM_EXCLUDE",W="SUCCESS";function Y(t){return("function"==typeof console.warn?console.warn.bind(console):console.log.bind(console))(t)}function G(t,e){return t+function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e)}function H(t){return`from${t}Id`}function K(t){return`to${t}Id`}function J(t){return function(...e){return this.getQuerySet()[t](...e)}}function Z(t){return function(){return this.getQuerySet()[t]}}function tt(t,e){const n=e.sharedMethods.slice();!function(t,e){let n=t;for(;n!==Function.prototype;)e(n),n=Object.getPrototypeOf(n)}(e,e=>{for(let r=0;r<n.length;r++){let o=!1;const i=n[r],s=Object.getOwnPropertyDescriptor(e.prototype,i);void 0!==s&&(void 0!==s.get?(s.get=Z(i),Object.defineProperty(t,i,s),o=!0):"function"==typeof s.value&&(t[i]=J(i),o=!0)),o&&n.splice(r--,1)}})}function et(t){return null!==t&&void 0!==t&&"function"==typeof t.getId?t.getId():t}function nt(t,e){const n=t.filter(t=>e.includes(t)),r=t.filter(t=>!n.includes(t)),o=e.filter(t=>!n.includes(t));return r.length||o.length?{delete:r,add:o}:null}const{getBatchToken:rt}=z;function ot({type:t,payload:e},n){if(t!==Q)return!1;if("object"!=typeof e)return!1;if(!e.hasOwnProperty(n))return!1;const r=e[n];return null!==r&&void 0!==r}const it=function(){function t(t,e,n){Object.assign(this,{modelClass:t,clauses:e||[]}),this._opts=n}t.addSharedMethod=function(t){this.sharedMethods=this.sharedMethods.concat(t)};var e=t.prototype;return e._new=function(t,e){const n=Object.assign({},this._opts,e);return new this.constructor(this.modelClass,t,n)},e.toString=function(){return this._evaluate(),`QuerySet contents:\n    - ${this.rows.map(({id:t})=>this.modelClass.withId(t).toString()).join("\n    - ")}`},e.toRefArray=function(){return this._evaluate()},e.toModelArray=function(){const{modelClass:t}=this;return this._evaluate().map(e=>new t(e))},e.count=function(){return this._evaluate(),this.rows.length},e.exists=function(){return Boolean(this.count())},e.at=function(t){const{modelClass:e}=this,n=this._evaluate();if(t>=0&&t<n.length)return new e(n[t])},e.first=function(){return this.at(0)},e.last=function(){const t=this._evaluate();return this.at(t.length-1)},e.all=function(){return this._new(this.clauses)},e.filter=function(t){const e="object"==typeof t?s()(t,et):t,n={type:Q,payload:e};return this._new(this.clauses.concat(n))},e.exclude=function(t){const e="object"==typeof t?s()(t,et):t,n={type:X,payload:e};return this._new(this.clauses.concat(n))},e._evaluate=function(){if(void 0===this.modelClass.session)throw new Error([`Tried to query the ${this.modelClass.modelName} model's table without a session. `,"Create a session using `session = orm.session()` and use ",`\`session["${this.modelClass.modelName}"]\` for querying instead.`].join(""));if(!this._evaluated){const{session:t,modelName:e}=this.modelClass,n={table:e,clauses:this.clauses};this.rows=t.query(n).rows,this._evaluated=!0}return this.rows},e.orderBy=function(t,e){const n={type:"REDUX_ORM_ORDER_BY",payload:[t,e]};return this._new(this.clauses.concat(n))},e.update=function(t){const{session:e,modelName:n}=this.modelClass;e.applyUpdate({action:q,query:{table:n,clauses:this.clauses},payload:t}),this._evaluated=!1},e.delete=function(){const{session:t,modelName:e}=this.modelClass;this.toModelArray().forEach(t=>t._onDelete()),t.applyUpdate({action:V,query:{table:e,clauses:this.clauses}}),this._evaluated=!1},e.map=function(){throw new Error("`QuerySet.prototype.map` has been removed. Call `.toModelArray()` or `.toRefArray()` first to map.")},e.forEach=function(){throw new Error("`QuerySet.prototype.forEach` has been removed. Call `.toModelArray()` or `.toRefArray()` first to iterate.")},o()(t,[{key:"withModels",get:function(){throw new Error("`QuerySet.prototype.withModels` has been removed. Use `.toModelArray()` or predicate functions that instantiate Models from refs, e.g. `new Model(ref)`.")}},{key:"withRefs",get:function(){Y("`QuerySet.prototype.withRefs` has been deprecated. Query building operates on refs only now.")}}]),t}();it.sharedMethods=["count","at","all","last","first","filter","exclude","orderBy","update","delete"];var st=it;var at=function(){function t(t,e,n,r,o){this.schema=t,this.db=e,this.state=n||e.getEmptyState(),this.initialState=this.state,this.withMutations=Boolean(r),this.batchToken=o||w(),this.modelData={},this.models=t.getModelClasses(),this.sessionBoundModels=this.models.map(t=>{function e(){return Reflect.construct(t,arguments,e)}return Reflect.setPrototypeOf(e.prototype,t.prototype),Reflect.setPrototypeOf(e,t),Object.defineProperty(this,t.modelName,{get:()=>e}),e.connect(this),e})}var e=t.prototype;return e.getDataForModel=function(t){return this.modelData[t]||(this.modelData[t]={}),this.modelData[t]},e.markAccessed=function(t,e){const n=this.getDataForModel(t);n.accessedInstances||(n.accessedInstances={}),e.forEach(t=>{n.accessedInstances[t]=!0})},e.markFullTableScanned=function(t){this.getDataForModel(t).fullTableScanned=!0},e.markAccessedIndexes=function(t){t.forEach(([t,e,n])=>{const r=this.getDataForModel(t);r.accessedIndexes||(r.accessedIndexes={}),r.accessedIndexes[e]=[...r.accessedIndexes[e]||[],n]})},e.applyUpdate=function(t){const e=this._getTransaction(t),n=this.db.update(t,e,this.state),{status:r,state:o,payload:i}=n;if(r!==W)throw new Error(`Applying update failed with status ${r}. Payload: ${i}`);return this.state=o,i},e.query=function(t){const e=this.db.query(t,this.state);return this._markAccessedByQuery(t,e),e},e._getTransaction=function(t){const{withMutations:e}=this,{action:n}=t;let{batchToken:r}=this;return[q,V].includes(n)&&(r=w()),{batchToken:r,withMutations:e}},e._markAccessedByQuery=function(t,e){const{table:n,clauses:r}=t,{rows:o}=e,{idAttribute:i}=this[n],s=new Set(o.map(t=>t[i])),a=[],u=r.some(t=>{if(!ot(t,i))return!1;const e=t.payload[i];return null!==e&&(s.add(e),!0)}),{indexes:c}=this.state[n];r.forEach(t=>{Object.keys(c).forEach(e=>{if(!ot(t,e))return;const r=t.payload[e];a.push([n,e,r])})}),u?this.markAccessed(n,s):a.length?this.markAccessedIndexes(a):this.markFullTableScanned(n)},e.getNextState=function(){return Y("`Session.prototype.getNextState` has been deprecated. Access the `Session.prototype.state` property instead."),this.state},e.reduce=function(){throw new Error("`Session.prototype.reduce` has been removed. The Redux integration API is now decoupled from ORM and Session - see the 0.9 migration guide in the GitHub repo.")},o()(t,[{key:"accessedModelInstances",get:function(){return this.sessionBoundModels.filter(({modelName:t})=>this.getDataForModel(t).accessedInstances).reduce((t,{modelName:e})=>({...t,[e]:this.getDataForModel(e).accessedInstances}),{})}},{key:"fullTableScannedModels",get:function(){return this.sessionBoundModels.filter(({modelName:t})=>this.getDataForModel(t).fullTableScanned).map(({modelName:t})=>t)}},{key:"accessedIndexes",get:function(){return this.sessionBoundModels.filter(({modelName:t})=>this.getDataForModel(t).accessedIndexes).reduce((t,{modelName:e})=>({...t,[e]:this.getDataForModel(e).accessedIndexes}),{})}}]),t}(),ut=n(2),ct=n.n(ut);function lt(t,e){return{get(){const{session:{[e]:n}}=this.getClass(),{[t]:r}=this._fields;return n.withId(r)},set(e){this.update({[t]:et(e)})}}}function ft(t,e,n,r,o){return{get(){const{session:{[t]:i,[e]:s,[n]:a}}=this.getClass(),u=o?s:i,c=o?i:s,l=o?r.to:r.from,f=o?r.from:r.to,d=this.getId(),h=a.filter({[l]:d}),p=new Set(h.toRefArray().map(t=>t[f])),m=c.filter(t=>p.has(t[c.idAttribute]));return m.add=function(...t){const e=new Set(t.map(et)),n=h.filter(t=>e.has(t[f]));if(n.exists()){const t=n.toRefArray().map(t=>t[f]);throw new Error(`Tried to add already existing ${c.modelName} id(s) ${t} to the ${u.modelName} instance with id ${d}`)}e.forEach(t=>{a.create({[f]:t,[l]:d})})},m.clear=function(){h.delete()},m.remove=function(...t){const e=new Set(t.map(et)),n=h.filter(t=>e.has(t[f]));if(n.count()!==e.size){const t=n.toRefArray().map(t=>t[f]),r=[...e].filter(e=>!t.includes(e));throw new Error(`Tried to delete non-existing ${c.modelName} id(s) ${r} from the ${u.modelName} instance with id ${d}`)}n.delete()},m},set(){throw new Error("Tried setting a M2M field. Please use the related QuerySet methods add, remove and clear.")}}}let dt=function(t){function e(){return t.apply(this,arguments)||this}ct()(e,t);var n=e.prototype;return n.installForwardsDescriptor=function(){Object.defineProperty(this.model.prototype,this.fieldName,this.field.createForwardsDescriptor(this.fieldName,this.model,this.toModel,this.throughModel))},n.installForwardsVirtualField=function(){this.model.virtualFields[this.fieldName]=this.field.createForwardsVirtualField(this.fieldName,this.model,this.toModel,this.throughModel)},n.installBackwardsDescriptor=function(){if(Object.getOwnPropertyDescriptor(this.toModel.prototype,this.backwardsFieldName))throw new Error(function(t,e,n,r){return[`Reverse field ${r} already defined`,` on model ${n}. To fix, set a custom related`,` name on ${t}.${e}.`].join("")}(this.model.modelName,this.fieldName,this.toModel.modelName,this.backwardsFieldName));Object.defineProperty(this.toModel.prototype,this.backwardsFieldName,this.field.createBackwardsDescriptor(this.fieldName,this.model,this.toModel,this.throughModel))},n.installBackwardsVirtualField=function(){this.toModel.virtualFields[this.backwardsFieldName]=this.field.createBackwardsVirtualField(this.fieldName,this.model,this.toModel,this.throughModel)},e}(function(){function t(t){this.field=t.field,this.fieldName=t.fieldName,this.model=t.model,this.orm=t.orm,this.field.references(this.model)&&(this.field.toModelName="this")}return t.prototype.run=function(){this.field.installsForwardsDescriptor&&this.installForwardsDescriptor(),this.field.installsForwardsVirtualField&&this.installForwardsVirtualField(),this.field.installsBackwardsDescriptor&&this.installBackwardsDescriptor(),this.field.installsBackwardsVirtualField&&this.installBackwardsVirtualField()},o()(t,[{key:"toModel",get:function(){if(void 0===this._toModel){const{toModelName:t}=this.field;this._toModel=t?"this"===t?this.model:this.orm.get(t):null}return this._toModel}},{key:"throughModel",get:function(){if(void 0===this._throughModel){const t=this.field.getThroughModelName(this.fieldName,this.model);this._throughModel=t?this.orm.get(t):null}return this._throughModel}},{key:"backwardsFieldName",get:function(){return this.field.getBackwardsFieldName(this.model)}}]),t}()),ht=function(){function t(){this.index=!1}var e=t.prototype;return e.getClass=function(){return this.constructor},e.references=function(t){return!1},e.getThroughModelName=function(t,e){return null},o()(t,[{key:"installerClass",get:function(){return dt}},{key:"installsForwardsDescriptor",get:function(){return!0}},{key:"installsForwardsVirtualField",get:function(){return!1}},{key:"installsBackwardsDescriptor",get:function(){return!1}},{key:"installsBackwardsVirtualField",get:function(){return!1}}]),t}(),pt=function(t){function e(e){var n;return(n=t.call(this)||this).opts=e||{},n.opts.hasOwnProperty("getDefault")&&(n.getDefault=n.opts.getDefault),n}return ct()(e,t),e.prototype.createForwardsDescriptor=function(t,e){return function(t){return{get(){return this._fields[t]},set(e){return this.set(t,e)},enumerable:!0,configurable:!0}}(t)},e}(ht),mt=function(t){function e(...e){var n;if(n=t.call(this)||this,1===e.length&&"object"==typeof e[0]){const t=e[0];n.toModelName=t.to,n.relatedName=t.relatedName,n.through=t.through,n.throughFields=t.throughFields,n.as=t.as}else[n.toModelName,n.relatedName]=e;return n}ct()(e,t);var n=e.prototype;return n.getBackwardsFieldName=function(t){return this.relatedName||function(t){return t.toLowerCase()+"Set"}(t.modelName)},n.createBackwardsVirtualField=function(t,e,n,r){return new(this.getClass())(e.modelName,t)},n.references=function(t){return this.toModelName===t.modelName},o()(e,[{key:"installsBackwardsVirtualField",get:function(){return!0}},{key:"installsBackwardsDescriptor",get:function(){return!0}},{key:"installerClass",get:function(){return function(t){function e(){return t.apply(this,arguments)||this}return ct()(e,t),e.prototype.installForwardsDescriptor=function(){Object.defineProperty(this.model.prototype,this.field.as||this.fieldName,this.field.createForwardsDescriptor(this.fieldName,this.model,this.toModel,this.throughModel))},e}(dt)}}]),e}(ht),yt=function(t){function e(...e){var n;return(n=t.call(this,...e)||this).index=!0,n}ct()(e,t);var n=e.prototype;return n.createForwardsDescriptor=function(t,e,n,r){return lt(t,n.modelName)},n.createBackwardsDescriptor=function(t,e,n,r){return function(t,e){return{get(){const{session:{[e]:n}}=this.getClass();return n.filter({[t]:this.getId()})},set(){throw new Error("Can't mutate a reverse many-to-one relation.")}}}(t,e.modelName)},e}(mt),bt=function(t){function e(){return t.apply(this,arguments)||this}ct()(e,t);var n=e.prototype;return n.getDefault=function(){return[]},n.getThroughModelName=function(t,e){return this.through||G(e.modelName,t)},n.createForwardsDescriptor=function(t,e,n,r){return ft(e.modelName,n.modelName,r.modelName,this.getThroughFields(t,e,n,r),!1)},n.createBackwardsDescriptor=function(t,e,n,r){return ft(e.modelName,n.modelName,r.modelName,this.getThroughFields(t,e,n,r),!0)},n.createBackwardsVirtualField=function(t,e,n,r){return new(this.getClass())({to:e.modelName,relatedName:t,through:r.modelName,throughFields:this.getThroughFields(t,e,n,r)})},n.createForwardsVirtualField=function(t,e,n,r){return new(this.getClass())({to:n.modelName,relatedName:t,through:this.through,throughFields:this.getThroughFields(t,e,n,r)})},n.getThroughFields=function(t,e,n,r){if(this.throughFields){const[t,e]=this.throughFields,o=r.fields[t];return{to:o.references(n)?t:e,from:o.references(n)?e:t}}if(e.modelName===n.modelName)return{to:K(n.modelName),from:H(e.modelName)};const o=t=>Object.keys(r.fields).find(e=>r.fields[e].references(t));return{to:o(n),from:o(e)}},o()(e,[{key:"installsForwardsVirtualField",get:function(){return!0}}]),e}(mt),vt=function(t){function e(){return t.apply(this,arguments)||this}ct()(e,t);var n=e.prototype;return n.getBackwardsFieldName=function(t){return this.relatedName||t.modelName.toLowerCase()},n.createForwardsDescriptor=function(t,e,n,r){return function(...t){return lt(...t)}(t,n.modelName)},n.createBackwardsDescriptor=function(t,e,n,r){return function(t,e){return{get(){const{session:{[e]:n}}=this.getClass();return n.get({[t]:this.getId()})},set(){throw new Error("Can't mutate a reverse one-to-one relation.")}}}(t,e.modelName)},e}(mt);function gt(t){return new pt(t)}function wt(...t){return new yt(...t)}function xt(...t){return new bt(...t)}function _t(...t){return new vt(...t)}function jt(t){const e=t.getClass(),{idAttribute:n,modelName:r}=e;return{table:r,clauses:[{type:Q,payload:{[n]:t.getId()}}]}}const Ot=function(){function t(t){this._initFields(t)}var e=t.prototype;return e._initFields=function(t){const e=Object(t);this._fields={...e},Object.keys(e).forEach(t=>{t in this||Object.defineProperty(this,t,{get:()=>this._fields[t],set:e=>this.set(t,e),configurable:!0,enumerable:!0})})},t.toString=function(){return`ModelClass: ${this.modelName}`},t.options=function(){return{}},t.markAccessed=function(t){if(void 0===this._session)throw new Error([`Tried to mark rows of the ${this.modelName} model as accessed without a session. `,"Create a session using `session = orm.session()` and call ",`\`session["${this.modelName}"].markAccessed\` instead.`].join(""));this.session.markAccessed(this.modelName,t)},t.markFullTableScanned=function(){if(void 0===this._session)throw new Error([`Tried to mark the ${this.modelName} model as full table scanned without a session. `,"Create a session using `session = orm.session()` and call ",`\`session["${this.modelName}"].markFullTableScanned\` instead.`].join(""));this.session.markFullTableScanned(this.modelName)},t.markAccessedIndexes=function(t){if(void 0===this._session)throw new Error([`Tried to mark indexes for the ${this.modelName} model as accessed without a session. `,"Create a session using `session = orm.session()` and call ",`\`session["${this.modelName}"].markAccessedIndexes\` instead.`].join(""));this.session.markAccessedIndexes(t.map(([t,e])=>[this.modelName,t,e]))},t.connect=function(t){if(!(t instanceof at))throw new Error("A model can only be connected to instances of Session.");this._session=t},t.getQuerySet=function(){const{querySetClass:t}=this;return new t(this)},t.invalidateClassCache=function(){this.isSetUp=void 0,this.virtualFields={}},t._getTableOpts=function(){return"function"==typeof this.backend?(Y("`Model.backend` has been deprecated. Please rename to `.options`."),this.backend()):this.backend?(Y("`Model.backend` has been deprecated. Please rename to `.options`."),this.backend):"function"==typeof this.options?this.options():this.options},t.create=function(t){if(void 0===this._session)throw new Error([`Tried to create a ${this.modelName} model instance without a session. `,"Create a session using `session = orm.session()` and call ",`\`session["${this.modelName}"].create\` instead.`].join(""));const e={...t},n={},r=Object.keys(this.fields),o=Object.keys(this.virtualFields);r.forEach(r=>{const o=this.fields[r],i=t.hasOwnProperty(r);if(o instanceof bt)i&&(n[r]=t[r],delete e[r]);else if(i){const n=t[r];e[r]=et(n)}else o.getDefault&&(e[r]=o.getDefault())}),o.forEach(r=>{if(!n.hasOwnProperty(r)){const o=this.virtualFields[r];t.hasOwnProperty(r)&&o instanceof bt&&(n[r]=t[r],delete e[r])}});const i=new this(this.session.applyUpdate({action:L,table:this.modelName,payload:e}));return i._refreshMany2Many(n),i},t.upsert=function(t){if(void 0===this.session)throw new Error([`Tried to upsert a ${this.modelName} model instance without a session. `,"Create a session using `session = orm.session()` and call ",`\`session["${this.modelName}"].upsert\` instead.`].join(""));const{idAttribute:e}=this;if(t.hasOwnProperty(e)){const n=t[e];if(this.idExists(n)){const e=this.withId(n);return e.update(t),e}}return this.create(t)},t.withId=function(t){return this.get({[this.idAttribute]:t})},t.idExists=function(t){return this.exists({[this.idAttribute]:t})},t.exists=function(t){if(void 0===this.session)throw new Error([`Tried to check if a ${this.modelName} model instance exists without a session. `,"Create a session using `session = orm.session()` and call ",`\`session["${this.modelName}"].exists\` instead.`].join(""));return Boolean(this._findDatabaseRows(t).length)},t.get=function(t){const e=this._findDatabaseRows(t);if(0===e.length)return null;if(e.length>1)throw new Error(`Expected to find a single row in \`${this.modelName}.get\`. Found ${e.length}.`);return new this(e[0])},e.getClass=function(){return this.constructor},e.getId=function(){return this._fields[this.getClass().idAttribute]},t._findDatabaseRows=function(t){const e={table:this.modelName};return t&&(e.clauses=[{type:Q,payload:t}]),this.session.query(e).rows},e.toString=function(){const t=this.getClass();return`${t.modelName}: {${Object.keys(t.fields).map(e=>{if(t.fields[e]instanceof bt){return`${e}: [${this[e].toModelArray().map(t=>t.getId()).join(", ")}]`}return`${e}: ${this._fields[e]}`}).join(", ")}}`},e.equals=function(t){return function(t,e){let n=0;return Object.entries(Object(t)).forEach(([t,r])=>{if(!e.hasOwnProperty(t)||e[t]!==r)return!1;n++}),n===Object.keys(e).length}(this._fields,t._fields)},e.set=function(t,e){this.update({[t]:e})},e.update=function(t){const e=this.getClass();if(void 0===e.session)throw new Error([`Tried to update a ${e.modelName} model instance without a session. `,"You cannot call `.update` on an instance that you did not receive from the database."].join(""));const n={...t},{fields:r,virtualFields:o}=e,i={};for(const t in n){if(r.hasOwnProperty(t)){const e=r[t];e instanceof yt||e instanceof vt?n[t]=et(n[t]):e instanceof bt&&(i[t]=n[t],delete n[t])}else if(o.hasOwnProperty(t)){o[t]instanceof bt&&(i[t]=n[t],delete n[t])}}const s={...this._fields,...n},a=new e(this._fields);a._initFields(s),a._refreshMany2Many(i);const u=Object.keys(i).every(t=>!nt(this[t],a[t])),c=this.equals(a);c||this._initFields(s),u||this._refreshMany2Many(i),c&&u||e.session.applyUpdate({action:q,query:jt(this),payload:n})},e.refreshFromState=function(){this._initFields(this.ref)},e.delete=function(){const t=this.getClass();if(void 0===t.session)throw new Error([`Tried to delete a ${t.modelName} model instance without a session. `,"You cannot call `.delete` on an instance that you did not receive from the database."].join(""));this._onDelete(),t.session.applyUpdate({action:V,query:jt(this)})},e._refreshMany2Many=function(t){const e=this.getClass(),{fields:n,virtualFields:r,modelName:o}=e;Object.keys(t).forEach(i=>{const s=!n.hasOwnProperty(i),a=r[i],u=t[i];if(!Array.isArray(u))throw new TypeError(`Failed to resolve many-to-many relationship: ${o}[${i}] must be an array (passed: ${u})`);const c=u.map(et),l=[...new Set(c)];if(c.length!==l.length)throw new Error(`Found duplicate id(s) when passing "${c}" to ${e.modelName}.${i} value`);const f=a.through||G(e.modelName,i),d=e.session[f];let h,p;s?({from:p,to:h}=a.throughFields):({from:h,to:p}=a.throughFields);const m=nt(d.filter(t=>t[h]===this[e.idAttribute]).toRefArray().map(t=>t[p]),c);if(m){const{delete:t,add:e}=m;t.length>0&&this[i].remove(...t),e.length>0&&this[i].add(...e)}})},e._onDelete=function(){const{virtualFields:t}=this.getClass();for(const e in t){const n=t[e];if(n instanceof bt)this[e].clear();else if(n instanceof yt){const t=this[e];t.exists()&&t.update({[n.relatedName]:null})}else n instanceof vt&&null!==this[e]&&(this[e][n.relatedName]=null)}},t.hasId=function(t){return console.warn("`Model.hasId` has been deprecated. Please use `Model.idExists` instead."),this.idExists(t)},e.getNextState=function(){throw new Error("`Model.prototype.getNextState` has been removed. See the 0.9 migration guide on the GitHub repo.")},o()(t,[{key:"ref",get:function(){const t=this.getClass();return t._findDatabaseRows({[t.idAttribute]:this.getId()})[0]}}],[{key:"idAttribute",get:function(){if(void 0===this._session)throw new Error([`Tried to get the ${this.modelName} model's id attribute without a session. `,"Create a session using `session = orm.session()` and access ",`\`session["${this.modelName}"].idAttribute\` instead.`].join(""));return this.session.db.describe(this.modelName).idAttribute}},{key:"session",get:function(){return this._session}},{key:"query",get:function(){return this.getQuerySet()}}]),t}();Ot.fields={id:gt()},Ot.virtualFields={},Ot.querySetClass=st;var Mt=Ot,Nt=n(51),St=n.n(Nt),kt=n(52),Et=n.n(kt),Ft=n(53),At=n.n(Ft),Dt=n(54),It=n.n(Dt);const Tt={idAttribute:"id",arrName:"items",mapName:"itemsById",fields:{}};var Pt=function(){function t(t){Object.assign(this,Tt,t)}var e=t.prototype;return e.accessId=function(t,e){return t[this.mapName][e]},e.accessIds=function(t,e){const n=t[this.mapName];return e.map(t=>n[t])},e.idExists=function(t,e){return t[this.mapName].hasOwnProperty(e)},e.accessIdList=function(t){return t[this.arrName]},e.accessList=function(t){return this.accessIds(t,this.accessIdList(t))},e.getMaxId=function(t){return this.getMeta(t,"maxId")},e.setMaxId=function(t,e,n){return this.setMeta(t,e,"maxId",n)},e.nextId=function(t){return t+1},e.getEmptyState=function(){const t={[this.arrName]:[],[this.mapName]:{}},e=Object.keys(this.fields).filter(t=>t!==this.idAttribute).filter(t=>this.fields[t].index).reduce((t,e)=>({...t,[e]:{}}),{});return{...t,indexes:e,meta:{}}},e.setMeta=function(t,e,n,r){const{batchToken:o,withMutations:i}=t;if(i){return z.mutable.setIn(["meta",n],r,e)}return z.batch.setIn(o,["meta",n],r,e)},e.getMeta=function(t,e){return t.meta[e]},e.query=function(t,e){if(0===e.length)return this.accessList(t);const{idAttribute:n}=this,r=(e,o)=>{const{type:i,payload:s}=o;if(!e){if(ot(o,n)){const e=s[n];return this.idExists(t,e)?[this.accessId(t,e)]:[]}if(i===Q&&"object"==typeof s){const e=[],n=[];if(Object.entries(t.indexes).forEach(([t,r])=>{ot(o,t)&&r.hasOwnProperty(s[t])&&(e.push(r[s[t]]),n.push(t))}),e.length){const i=e.pop(),a=e.reduce((t,e)=>{const n=new Set(e);return t.filter(Set.prototype.has,n)},i),u=Object.keys(s).reduce((t,e)=>(n.includes(e)||(t[e]=s[e]),t),{});return 0===Object.keys(u).length?this.accessIds(t,a):r(this.accessIds(t,a),{...o,payload:u})}}return r(this.accessList(t),o)}switch(i){case Q:return Et()(e,s);case X:return St()(e,s);case"REDUX_ORM_ORDER_BY":{const[t,n]=s;return At()(e,t,n)}default:return e}};return It()(e,t=>ot(t,n)?1:function({type:t}){return[Q,X].includes(t)}(t)?2:3).reduce(r,void 0)},e.insert=function(t,e,n){const{batchToken:r,withMutations:o}=t,i=n.hasOwnProperty(this.idAttribute);let s=e;const[a,u]=function(t,e){let n,r,o=t;return void 0===o&&(o=-1),void 0===e?r=n=o+1:(n=Math.max(o+1,e),r=e),[n,r]}(this.getMaxId(e),n[this.idAttribute]);s=this.setMaxId(t,e,a);const c=i?n:z.batch.set(r,this.idAttribute,u,n),l=Object.keys(s.indexes).reduce((t,e)=>n.hasOwnProperty(e)?null===n[e]?t:(t.push([e,n[e]]),t):t,[]);if(o)return z.mutable.push(u,s[this.arrName]),z.mutable.set(u,c,s[this.mapName]),l.forEach(([t,e])=>{const n=s.indexes[t];n.hasOwnProperty(e)?z.mutable.push(u,n[e]):z.mutable.set(e,[u],n)}),{state:s,created:c};const f=z.batch.merge(r,l.reduce((t,[e,n])=>(t[e]=z.batch.merge(r,{[n]:z.batch.push(r,u,t[e][n]||[])},t[e]),t),{...s.indexes}),s.indexes);return{state:z.batch.merge(r,{[this.arrName]:z.batch.push(r,u,s[this.arrName]),[this.mapName]:z.batch.merge(r,{[u]:c},s[this.mapName]),indexes:f},s),created:c}},e.update=function(t,e,n,r){const{batchToken:o,withMutations:i}=t,s=i?z.mutable.set:z.batch.set(o),a=Object.keys(e.indexes).filter(t=>r.hasOwnProperty(t)),u=[],c=[],l=n.reduce((t,e)=>{const n=a.reduce((t,n)=>({...t,[n]:e[n]}),{}),l=(t=>{return(i?z.mutable.merge:z.batch.merge(o))(r,t)})(e),f=a.reduce((t,e)=>({...t,[e]:l[e]}),{}),d=l[this.idAttribute],h=s(d,l,t);return a.forEach(t=>{const{[t]:e}=n,{[t]:r}=f;e!==r&&(null!==e&&c.push([t,e,d]),null!==r&&u.push([t,r,d]))}),h},e[this.mapName]);let f=e.indexes;return i?(c.forEach(([t,e,n])=>{const r=f[t][e],o=r.indexOf(n);-1!==o&&z.mutable.splice(o,1,[],r)}),u.forEach(([t,e,n])=>{z.mutable.push(n,f[t][e])})):(u.length&&(f=z.batch.merge(o,u.reduce((t,[e,n,r])=>(t[e]=z.batch.merge(o,{[n]:z.batch.push(o,r,t[e][n]||[])},t[e]),t),{...f}),f)),c.length&&(f=z.batch.merge(o,c.reduce((t,[e,n,r])=>(t[e]=z.batch.merge(o,{[n]:z.batch.filter(o,t=>t!==r,t[e][n]||[])},t[e]),t),{...f}),f))),z.batch.merge(o,{[this.mapName]:l,indexes:f},e)},e.delete=function(t,e,n){const{batchToken:r,withMutations:o}=t,{arrName:i,mapName:s}=this,a=e[i],u=n.map(t=>t[this.idAttribute]);if(o)return u.forEach(t=>{const n=a.indexOf(t);-1!==n&&z.mutable.splice(n,1,[],a),z.mutable.omit(t,e[s])}),Object.values(e.indexes).forEach(t=>Object.values(t).forEach(t=>u.forEach(e=>{const n=t.indexOf(e);-1!==n&&z.mutable.splice(n,1,[],t)}))),e;const c=z.batch.merge(r,Object.entries(e.indexes).reduce((t,[e,n])=>(t[e]=z.batch.merge(r,Object.entries(n).reduce((t,[e,n])=>(t[e]=z.batch.filter(r,t=>!u.includes(t),n),t),{...t[e]}),t[e]),t),{...e.indexes}),e.indexes);return z.batch.merge(r,{[i]:z.batch.filter(r,t=>!u.includes(t),e[i]),[s]:z.batch.omit(r,u,e[s]),indexes:z.batch.merge(r,c,e.indexes)},e)},t}();function Ct(t,e,n){const{table:r,clauses:o}=e;return{rows:t[r].query(n[r],o)}}function $t(t,e,n,r){const{action:o,payload:i}=e;let s,a,u;if(o===L){({table:s}=e);const o=t[s],c=r[s],l=o.insert(n,c,i);a=l.state,u=l.created}else{const{query:c}=e;({table:s}=c);const{rows:l}=Ct(t,c,r),f=t[s],d=r[s];if(o===q)a=f.update(n,d,l,i),u=Ct(t,c,r).rows;else{if(o!==V)throw new Error(`Database received unknown update type: ${o}`);a=f.delete(n,d,l),u=l}}const c=function(t,e,n,r){const{batchToken:o,withMutations:i}=n;return i?(r[t]=e,r):z.batch.set(o,t,e,r)}(s,a,n,r);return{status:W,state:c,payload:u}}var Rt=function(t){const{tables:e}=t,n=Object.entries(e).reduce((t,[e,n])=>({...t,[e]:new Pt(n)}),{});return{getEmptyState:()=>Object.entries(n).reduce((t,[e,n])=>({...t,[e]:n.getEmptyState()}),{}),query:Ct.bind(null,n),update:$t.bind(null,n),describe:t=>n[t]}},Bt=n(55);const Ut=(t,e)=>t===e,zt=(t,e,n)=>e.every((e,r)=>n(e,t[r])),qt=(t,e,n)=>{const{accessedInstances:r}=t;return Object.entries(r).every(([r,o])=>{if(t.ormState[r]===e[r])return!0;const{mapName:i}=n.getDatabase().describe(r),{[i]:s}=t.ormState[r],{[i]:a}=e[r];return((t,e,n)=>t.every(t=>e[t]===n[t]))(Object.keys(o),s,a)})},Vt=(t,e)=>{const{accessedIndexes:n}=t;return Object.entries(n).every(([n,r])=>Object.entries(r).every(([r,o])=>o.every(o=>t.ormState[n].indexes[r][o]===e[n].indexes[r][o])))},Lt=(t,e)=>t.fullTableScannedModels.every(n=>t.ormState[n]===e[n]);function Qt(t,e=Ut,n){const r={result:null,args:null,ormState:null,fullTableScannedModels:[],accessedInstances:{},accessedIndexes:{}};return(...o)=>{const[i,...s]=o;if(r.args&&r.ormState&&zt(r.args,s,e)&&Lt(r,i)&&Vt(r,i)&&qt(r,i,n))return r.result;r.args=s;const a=n.session(i);r.ormState=i;const u=t(...[a,...s]);return r.result=u,r.accessedInstances=a.accessedModelInstances,r.accessedIndexes=a.accessedIndexes,r.fullTableScannedModels=a.fullTableScannedModels,u}}function Xt(t,e=function(t,e){t.sessionBoundModels.forEach(n=>{"function"==typeof n.reducer&&n.reducer(e,n,t)})}){return(n,r)=>{const o=t.session(n||t.getEmptyState());return e(o,r),o.state}}function Wt(t,...e){return 1===e.length?Qt(e[0],void 0,t):Object(Bt.createSelectorCreator)(Qt,void 0,t)(...e)}const Yt={createDatabase:Rt},Gt=["indexes","meta"];let Ht=function(){function t(t){const{createDatabase:e}=Object.assign({},Yt,t||{});this.createDatabase=e,this.registry=[],this.implicitThroughModels=[],this.installedFields={}}var e=t.prototype;return e.register=function(...t){t.forEach(t=>{if(void 0===t.modelName)throw new Error("A model was passed that doesn't have a modelName set");t.invalidateClassCache(),this.registerManyToManyModelsFor(t),this.registry.push(t)})},e.registerManyToManyModelsFor=function(t){const{fields:e}=t,n=t.modelName;Object.entries(e).forEach(([t,e])=>{if(!(e instanceof bt))return;let r;r="this"===e.toModelName?n:e.toModelName;const i=n===r,s=H(n),a=K(r);if(e.through){if(i&&!e.throughFields)throw new Error("Self-referencing many-to-many relationship at "+`"${n}.${t}" using custom `+`model "${e.through}" has no `+"throughFields key. Cannot determine which fields reference the instances partaking in the relationship.")}else{const e=function(t){function e(){return t.apply(this,arguments)||this}return ct()(e,t),e}(Mt);e.modelName=G(n,t);const u=i?function(t){function e(){return t.apply(this,arguments)||this}return ct()(e,t),o()(e,[{key:"installsBackwardsVirtualField",get:function(){return!1}},{key:"installsBackwardsDescriptor",get:function(){return!1}}]),e}(yt):yt;e.fields={id:gt(),[s]:new u(n),[a]:new u(r)},e.invalidateClassCache(),this.implicitThroughModels.push(e)}})},e.get=function(t){const e=this.registry.concat(this.implicitThroughModels),n=Object.values(e).find(e=>e.modelName===t);if(void 0===n)throw new Error(`Did not find model ${t} from registry.`);return n},e.getModelClasses=function(){return this._setupModelPrototypes(this.registry),this._setupModelPrototypes(this.implicitThroughModels),this.registry.concat(this.implicitThroughModels)},e.generateSchemaSpec=function(){return{tables:this.getModelClasses().reduce((t,e)=>{const n=e.modelName,r=e._getTableOpts();return Object.keys(r).forEach(t=>{if((t=>Gt.includes(t))(t))throw new Error(`Reserved keyword \`${t}\` used in ${n}.options.`)}),t[n]=Object.assign({},{fields:e.fields},r),t},{})}},e.getDatabase=function(){return this.db||(this.db=this.createDatabase(this.generateSchemaSpec())),this.db},e.getEmptyState=function(){return this.getDatabase().getEmptyState()},e.session=function(t){return new at(this,this.getDatabase(),t)},e.mutableSession=function(t){return new at(this,this.getDatabase(),t,!0)},e._setupModelPrototypes=function(t){t.forEach(t=>{if(!t.isSetUp){const{fields:e,modelName:n,querySetClass:r}=t;Object.entries(e).forEach(([e,r])=>{this._isFieldInstalled(n,e)||(this._installField(r,e,t),this._setFieldInstalled(n,e))}),tt(t,r),t.isSetUp=!0}})},e._isFieldInstalled=function(t,e){return!!this.installedFields.hasOwnProperty(t)&&!!this.installedFields[t][e]},e._setFieldInstalled=function(t,e){this.installedFields.hasOwnProperty(t)||(this.installedFields[t]={}),this.installedFields[t][e]=!0},e._installField=function(t,e,n){new(0,t.installerClass)({field:t,fieldName:e,model:n,orm:this}).run()},e.withMutations=function(t){return Y("`ORM.prototype.withMutations` has been deprecated. Use `ORM.prototype.mutableSession` instead."),this.mutableSession(t)},e.from=function(t){return Y("`ORM.prototype.from` has been deprecated. Use `ORM.prototype.session` instead."),this.session(t)},e.reducer=function(){return Y("`ORM.prototype.reducer` has been deprecated. Access the `Session.prototype.state` property instead."),Xt(this)},e.createSelector=function(...t){return Y("`ORM.prototype.createSelector` has been deprecated. Import `createSelector` from Redux-ORM instead."),Wt(this,...t)},e.getDefaultState=function(){return Y("`ORM.prototype.getDefaultState` has been deprecated. Use `ORM.prototype.getEmptyState` instead."),this.getEmptyState()},e.define=function(){throw new Error("`ORM.prototype.define` has been removed. Please define a Model class.")},t}();n.d(e,"Schema",function(){return Kt}),n.d(e,"Backend",function(){return Jt}),n.d(e,"Attribute",function(){return pt}),n.d(e,"QuerySet",function(){return st}),n.d(e,"Model",function(){return Mt}),n.d(e,"ORM",function(){return Ht}),n.d(e,"Session",function(){return at}),n.d(e,"ForeignKey",function(){return yt}),n.d(e,"ManyToMany",function(){return bt}),n.d(e,"OneToOne",function(){return vt}),n.d(e,"fk",function(){return wt}),n.d(e,"many",function(){return xt}),n.d(e,"attr",function(){return gt}),n.d(e,"oneToOne",function(){return _t}),n.d(e,"createReducer",function(){return Xt}),n.d(e,"createSelector",function(){return Wt});const Kt=function(){throw new Error("Schema has been renamed to ORM. Please import ORM instead of Schema from Redux-ORM.")},Jt=function(){throw new Error("Having a custom Backend instance is now unsupported. Documentation for database customization is upcoming, for now please look at the db folder in the source.")};e.default=Mt}])});
//# sourceMappingURL=redux-orm.min.js.map